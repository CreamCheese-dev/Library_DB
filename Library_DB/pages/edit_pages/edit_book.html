<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Book</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <h1>Edit Book</h1>
    <form id="editBookForm">
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title" required><br>
        <label for="author">Author:</label><br>
        <input type="text" id="author" name="author"><br>
        <label for="isbn">ISBN:</label><br>
        <input type="text" id="isbn" name="isbn" required disabled><br>
        <label for="publishedYear">Published Year:</label><br>
        <input type="number" id="publishedYear" name="publishedYear" required><br>
        <label for="genre">Genre:</label><br>
        <input type="text" id="genre" name="genre"><br><br>
        <button type="button" onclick="updateBook()">Update</button>
        <button type="button" onclick="deleteBook()">Delete</button>
    </form>

    <script>
        // Assume data would be fetched based on ISBN passed via query string.
        // For now, simulate fetching data
        const books = [
            { isbn: '978-0393089080', title: 'Liber Novus', author: 'Carl Jung', publishedYear: 2009, genre: 'Psychology' },
            { isbn: '978-0451524935', title: '1984', author: 'George Orwell', publishedYear: 1949, genre: 'Fiction' },
            { isbn: '978-0060850524', title: 'Brave New World', author: 'Aldous Huxley', publishedYear: 1932, genre: 'Dystopian' }
        ];

        function fetchBookDetails() {
            // This would normally be a server call. We simulate it here
            const isbn = new URLSearchParams(window.location.search).get('isbn');
            const book = books.find(b => b.isbn === isbn);
            if (book) {
                document.getElementById('title').value = book.title;
                document.getElementById('author').value = book.author;
                document.getElementById('isbn').value = book.isbn;
                document.getElementById('publishedYear').value = book.publishedYear;
                document.getElementById('genre').value = book.genre;
            }
        }

        function updateBook() {
            console.log("Update book details...");
            // Implement update logic here or redirect to server-side script
        }

        function deleteBook() {
            console.log("Delete book...");
            // Implement deletion logic here or redirect to server-side script
            // Deleting this book should set the associated foreign key references to NULL or remove the relationships
        }

        window.onload = fetchBookDetails;
    </script>
</body>
</html>
